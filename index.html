<!DOCTYPE html>
<head>
<style>
canvas {
border: 1px black solid;
}
</style>
</head>
<body>

<canvas id="gra" width="625" height="625"> </canvas>


<script>
	var plansza=document.getElementById("gra");
    var ctx=plansza.getContext("2d");
	document.addEventListener("keydown",sterowanie);
	setInterval(gra,1000/10);
	
	var px=10;
	var py=10; // pozycje weza
	var jx=20;
	var jy=20; // startowa pozycja jablka
	var xv=0;
	var yv=0; //predkosc
	var slad=[];
	var ogon = 3; // poczatkowa dlugosc ogona
	var lk=25;
	var lp=25;  //liczba kratek i plytek 25*25=625
	function gra() {
	px+=xv;
	py+=yv;
	
		if(px>=480) {
			alert('koniec gry');
		}
		if(py>=480) {
			alert('koniec gry');
		}
		if(py<=0) {
			alert('koniec gry');
		}
		if(px<=0) {
			alert('koniec gry');
		} 
	ctx.fillStyle = 'white';
	ctx.fillRect(0,0,plansza.width,plansza.height);
	
	ctx.fillStyle = 'black';  // kolor węża
		for(var i=0;i<slad.length;i++) {
			ctx.fillRect(slad[i].x*lk,slad[i].y*lk,lk-2,lk-2); // wąż
			if(slad[i].x==px && slad[i].y==py) {
				ogon = 3;
			}
		}
		slad.push({x:px,y:py});
		while(slad.length>ogon)
		{
		slad.shift();
		}
	
	if(jx==px && jy==py) 
	{
		ogon++;
		ax=Math.floor(Math.random()*lp);
        ay=Math.floor(Math.random()*lp);
	}
	
	ctx.fillStyle="green";
    ctx.fillRect(jx*lk,jy*lk,lk-2,lk-2);
	
		
	}
	
	function sterowanie(klik) {
    switch(klik.keyCode) {
        case 37:
            xv=-1;yv=0;
            break;
        case 38:
            xv=0;yv=-1;
            break;
        case 39:
            xv=1;yv=0;
            break;
        case 40:
            xv=0;yv=1;
            break;
		}
	}
</script>
</body>
</html>