<!DOCTYPE html>
<head>
<style>
canvas {
border: 1 black solid;
}

</style>
</head>
<body>


<canvas id="gra" width="625" height="625"> 


</canvas>
<p id="wynik"> </p>

<script>
	var plansza = document.querySelector("canvas");
    var ctx = plansza.getContext("2d");
	var punkty = document.querySelector("p");
	document.addEventListener("keydown",sterowanie);
	setInterval(gra,1000/10);
	
	
	var px=10;
	var py=10; // pozycje weza
	var jx=20;
	var jy=20; // startowa pozycja jablka
	var xv=0;
	var yv=0; //predkosc
	var slad=[];
	var ogon = 3; // poczatkowa dlugosc ogona
	var lk=25;
	var lp=25;  //liczba kratek i plytek 25*25=625
	var score=0; // punkty na start;
	
	function gra() {
	px+=xv;
	py+=yv;
	
		if(px < 0-1) {
			alert('koniec gry');
		}
		if(px > lp) {
			alert('koniec gry');
		}
		if(py < 0-1) {
			alert('koniec gry');
		}
		if(py > lp) {
			alert('koniec gry');
		} 
	ctx.fillStyle = 'white';
	ctx.fillRect(0,0,plansza.width,plansza.height);
	
	ctx.fillStyle = 'black';  // kolor węża
		for(var i=0;i<slad.length;i++) {
			ctx.fillRect(slad[i].x*lk,slad[i].y*lk,lk-2,lk-2); // wąż
			if(slad[i].x==px && slad[i].y==py) {
				ogon = 3;
				score = 0;
			}
		}
		slad.push({x:px,y:py});
		while(slad.length>ogon)
		{
		slad.shift();
		}
	
		if(jx==px && jy==py) 
		{	
			ogon++;
			score++;
			jx=Math.floor(Math.random()*lp);
			jy=Math.floor(Math.random()*lp);
			
		}
	
		ctx.fillStyle="green";  // jablko 
		ctx.fillRect(jx*lk,jy*lk,lk-2,lk-2);
		punkty.textContent="Punkty: " + score;
		
	}
	
	function sterowanie(klik) {
    switch(klik.keyCode) {
        case 37:
            xv=-1;yv=0;
            break;
        case 38:
            xv=0;yv=-1;
            break;
        case 39:
            xv=1;yv=0;
            break;
        case 40:
            xv=0;yv=1;
            break;
		}
	}
	

</script>
</body>
</html>